# Boilerplate Rails RESTful JSON API

This API is implemented according to the [JSON API spec v1.1](https://jsonapi.org/format/1.1/)

## Filtering
**Description:** JSON API filtering with `all_filters` as default matcher.

**URI example:** `GET /users?filter[email-eq]=user@email.com&filter[name-cont]=son&match=any_filters`

## Sorting
**Description:** JSON API sorting.

**URI example:** `GET /users?sort=name,-age`

## Inclusion
**Description:** JSON API inclusion of related resources. Dot-separated relationship path supporting not implemented at this time.

**URI example:** `GET /users?include=team,organization`

## Pagination
**Description:** JSON API pagination with offset strategy.

**URI example:** `GET /users?page[number]=1&page[size]=1`

# Group Session


## Session Refresh [/session/refresh]


### Refresh user session [POST /api/v1/users/session/refresh]


+ Request renders refreshed tokens bundle in meta
**POST**&nbsp;&nbsp;`/api/v1/users/session/refresh`

    + Headers

            Accept: application/json
            X-Refresh-Token: eyJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NjYzMDc4NzQsInVpZCI6IjVhZjNiMGNjLWNmNTItNGZkZi04MTg0LWY0MGMxMGI1ODM5YSIsImV4cCI6MTU2NjkxMjY3NH0.io09PwzDwLNycSfVYePMX-cgptXW9lKyVYJWL78b0uk
            Content-Type: application/json

+ Response 201

    + Headers

            Content-Type: application/vnd.api+json; charset=utf-8

    + Body

            {
              "data": null,
              "meta": {
                "csrf": "QCLtmNyuTbNpf/9SJhNq0obvPx/MT52PVWR+Wivl5bGdMx9aLoRlb/kxwzjdcvwo+QI0VsUAE93o+gbRvS+uPw==",
                "access": "eyJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NjYzMDc4NzQsImV4cCI6MTU2NjMwNzg3NCwidWlkIjoiZjhhZWIwZjQtZDg5Yi00MDM3LTg2YTEtOWYyYTZlOTNlNWExIn0.GdveEU2LV7Nlk1kSfyYT8EdgY5LMc5-jPALpI0zUX8U",
                "access_expires_at": "2019-08-20T16:31:14.000+03:00"
              }
            }

+ Request renders auth errors
**POST**&nbsp;&nbsp;`/api/v1/users/session/refresh`

    + Headers

            Accept: application/json
            X-Refresh-Token: invalid_token
            Content-Type: application/json

+ Response 401

    + Headers

            Content-Type: application/vnd.api+json; charset=utf-8

    + Body

            {
              "errors": [
                {
                  "source": {
                    "pointer": "/base"
                  },
                  "detail": "invalid_token"
                }
              ]
            }

+ Request returns forbidden status
**POST**&nbsp;&nbsp;`/api/v1/users/session/refresh`

    + Headers

            Accept: application/json
            X-Refresh-Token: eyJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NjYzMTE0NzQsInVpZCI6ImQ5YWY5MDgxLTk4ZGItNDc0Yi1iYjBlLTI4YjMwNTkxN2NlYyIsImV4cCI6MTU2NjkxMjY3NH0.doTG29lsT7nIiIjA0SW4EVzFdwXc_Nj__YfO-DTURws
            Content-Type: application/json

+ Response 403

    + Headers

            Content-Type: application/json

## Sessions [/users/session]


### Create user session (Sign In) [POST /api/v1/users/session]


+ Request renders user whose session was created
**POST**&nbsp;&nbsp;`/api/v1/users/session`

    + Headers

            Accept: application/json
            Content-Type: application/json

    + Body

            {
              "email": "adelaide.collins@mayertyost.co.uk",
              "password": "dcrChd_LY7XT"
            }

+ Response 201

    + Headers

            Content-Type: application/vnd.api+json; charset=utf-8

    + Body

            {
              "data": {
                "id": "1655",
                "type": "account",
                "attributes": {
                  "email": "adelaide.collins@mayertyost.co.uk",
                  "created_at": "2019-08-20T13:31:14.867Z"
                }
              },
              "meta": {
                "csrf": "Xj1Q75Nk4uKCTPwDsVy2p+tIp6+b/LAfm95FZ2rDd+YMo5Y6Z/48H+p1gSTJoAPHJBYwu7HWw7e2fk8pzgjWUw==",
                "access": "eyJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NjYzMTE0NzQsImFjY291bnRfaWQiOjE2NTUsInVpZCI6ImY4MTcxZjBkLTU3NDEtNDk3OC05OGM5LThjM2NlMzY1ZGY5MiIsImV4cCI6MTU2NjMxMTQ3NH0.n8u6fr971bWL12fVWY9ssZ7uw1v0ZhHLy3NMw_tK6c0",
                "access_expires_at": "2019-08-20T17:31:14.000+03:00",
                "refresh": "eyJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NjYzMTE0NzQsInVpZCI6ImFiMjFiZWM3LTE3ZGMtNDZjZS1hODYxLTczNzYyMDVjZDRlZSIsImV4cCI6MTU2NjkxMjY3NH0.6D3vVK6pVJTJSWplSBA1e3ipU2ECUZK9I5iL7p85RqI",
                "refresh_expires_at": "2019-08-27T16:31:14.000+03:00"
              }
            }

+ Request renders resource errors
**POST**&nbsp;&nbsp;`/api/v1/users/session`

    + Headers

            Accept: application/json
            Content-Type: application/json

    + Body



+ Response 422

    + Headers

            Content-Type: application/vnd.api+json; charset=utf-8

    + Body

            {
              "errors": [
                {
                  "source": {
                    "pointer": "/email"
                  },
                  "detail": "is missing"
                },
                {
                  "source": {
                    "pointer": "/password"
                  },
                  "detail": "is missing"
                }
              ]
            }

+ Request returns not found status
**POST**&nbsp;&nbsp;`/api/v1/users/session`

    + Headers

            Accept: application/json
            Content-Type: application/json

    + Body

            {
              "email": "_gerald_williamson@dubuque.info",
              "password": "6IUHEt8yqviVTW5j"
            }

+ Response 404

    + Headers

            Content-Type: application/json

+ Request renders auth errors
**POST**&nbsp;&nbsp;`/api/v1/users/session`

    + Headers

            Accept: application/json
            Content-Type: application/json

    + Body

            {
              "email": "charita.haley@lakinbosco.info",
              "password": "_qUYjHvazIAwuiIz"
            }

+ Response 401

    + Headers

            Content-Type: application/vnd.api+json; charset=utf-8

    + Body

            {
              "errors": [
                {
                  "source": {
                    "pointer": "/base"
                  },
                  "detail": "wrong credentials"
                }
              ]
            }

### Destroy user session (Sign Out) [DELETE /api/v1/users/session]


+ Request clears user session
**DELETE**&nbsp;&nbsp;`/api/v1/users/session`

    + Headers

            Accept: application/json
            X-Refresh-Token: eyJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NjYzMTE0NzQsInVpZCI6IjQ2M2RkNmQ4LWRkY2UtNDc0MC04MmQzLTU5OWM5OTY3OGM2MiIsImV4cCI6MTU2NjkxMjY3NH0.L3X8jrLc7J6FvZV0nonMjcl9tMJfaLcIL-NNaRbS3xs
            Content-Type: application/json

+ Response 204

+ Request renders auth errors
**DELETE**&nbsp;&nbsp;`/api/v1/users/session`

    + Headers

            Accept: application/json
            X-Refresh-Token: invalid_token
            Content-Type: application/json

+ Response 401

    + Headers

            Content-Type: application/vnd.api+json; charset=utf-8

    + Body

            {
              "errors": [
                {
                  "source": {
                    "pointer": "/base"
                  },
                  "detail": "invalid_token"
                }
              ]
            }
